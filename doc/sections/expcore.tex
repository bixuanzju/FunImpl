% generated by Ott 0.25 from: expcore.ott
\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
  \newcommand{\labeledjudge}[1]{\vdash_{\!\!\mathsf{#1} } }

\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ \ottmv{x} $ & \ottcom{Variable names} \\
}}

\newcommand{\otte}{
\ottrulehead{\ottnt{e}  ,\ \tau}{::=}{\ottcom{Expressions}}\ottprodnewline
\ottfirstprodline{|}{\ottmv{x}}{}{}{}{\ottcom{Variable}}\ottprodnewline
\ottprodline{|}{\ottnt{s}}{}{}{}{\ottcom{Sort}}\ottprodnewline
\ottprodline{|}{\ottnt{e} \, \ottnt{e'}}{}{}{}{\ottcom{Application}}\ottprodnewline
\ottprodline{|}{\lambda  \ottmv{x}  \ottsym{:}  \tau  \ottsym{.}  \ottnt{e}}{}{}{}{\ottcom{Abstraction}}\ottprodnewline
\ottprodline{|}{\Pi \, \ottmv{x}  \ottsym{:}  \tau  \ottsym{.}  \tau'}{}{}{}{\ottcom{Product}}\ottprodnewline
\ottprodline{|}{\mathsf{fold} \, \ottsym{[}  \tau  \ottsym{]}  \ottnt{e}}{}{}{}{\ottcom{Generalized fold}}\ottprodnewline
\ottprodline{|}{\mathsf{unfold} \, \ottnt{e}}{}{}{}{\ottcom{Generalized unfold}}\ottprodnewline
\ottprodline{|}{\mathbf{let} \, \ottmv{x}  \ottsym{:}  \tau  \ottsym{=}  \ottnt{e} \, \mathbf{in} \, \ottnt{e'}} {\textsf{S}}{}{}{\ottcom{Let binding}}}

\newcommand{\otts}{
\ottrulehead{\ottnt{s}  ,\ t}{::=}{\ottcom{Sorts}}\ottprodnewline
\ottfirstprodline{|}{\star}{}{}{}{\ottcom{Star}}\ottprodnewline
\ottprodline{|}{\Box}{}{}{}{\ottcom{Square}}}

\newcommand{\ottG}{
\ottrulehead{\Gamma}{::=}{\ottcom{Contexts}}\ottprodnewline
\ottfirstprodline{|}{\varnothing}{}{}{}{\ottcom{Empty}}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \tau}{}{}{}{\ottcom{Variable binding}}}

\newcommand{\ottv}{
\ottrulehead{\ottnt{v}}{::=}{\ottcom{Values}}\ottprodnewline
\ottfirstprodline{|}{\lambda  \ottmv{x}  \ottsym{:}  \tau  \ottsym{.}  \ottnt{e}}{}{}{}{\ottcom{Abstraction}}\ottprodnewline
\ottprodline{|}{\Pi \, \ottmv{x}  \ottsym{:}  \tau  \ottsym{.}  \tau'}{}{}{}{\ottcom{Product}}\ottprodnewline
\ottprodline{|}{\mathsf{fold} \, \ottsym{[}  \tau  \ottsym{]}  \ottnt{e}}{}{}{}{\ottcom{Generalized fold}}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\otte\ottinterrule
\otts\ottinterrule
\ottG\ottinterrule
\ottv\ottafterlastrule
}}

% defnss
% defns Lint
%% defn expr
\newcommand{\ottdruleTXXAx}[1]{\ottdrule[#1]{%
}{
\varnothing  \vdash  \star  \ottsym{:}  \Box}{%
{\ottdrulename{T\_Ax}}{}%
}}


\newcommand{\ottdruleTXXVar}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \tau  \ottsym{:}  \ottnt{s}}%
}{
\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \tau  \vdash  \ottmv{x}  \ottsym{:}  \tau}{%
{\ottdrulename{T\_Var}}{}%
}}


\newcommand{\ottdruleTXXWeak}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e}  \ottsym{:}  \tau'}%
\ottpremise{\Gamma  \vdash  \tau  \ottsym{:}  \ottnt{s}}%
}{
\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \tau  \vdash  \ottnt{e}  \ottsym{:}  \tau'}{%
{\ottdrulename{T\_Weak}}{}%
}}


\newcommand{\ottdruleTXXApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottsym{(}  \Pi \, \ottmv{x}  \ottsym{:}  \tau'  \ottsym{.}  \tau  \ottsym{)}}%
\ottpremise{\Gamma  \vdash  \ottnt{e'}  \ottsym{:}  \tau'}%
}{
\Gamma  \vdash  \ottnt{e} \, \ottnt{e'}  \ottsym{:}  \tau  \ottsym{[}  \ottmv{x}  \mapsto  \ottnt{e'}  \ottsym{]}}{%
{\ottdrulename{T\_App}}{}%
}}


\newcommand{\ottdruleTXXLam}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \tau  \vdash  \ottnt{e}  \ottsym{:}  \tau'}%
\ottpremise{\Gamma  \vdash  \ottsym{(}  \Pi \, \ottmv{x}  \ottsym{:}  \tau  \ottsym{.}  \tau'  \ottsym{)}  \ottsym{:}  \ottnt{s}}%
}{
\Gamma  \vdash  \ottsym{(}  \lambda  \ottmv{x}  \ottsym{:}  \tau  \ottsym{.}  \ottnt{e}  \ottsym{)}  \ottsym{:}  \ottsym{(}  \Pi \, \ottmv{x}  \ottsym{:}  \tau  \ottsym{.}  \tau'  \ottsym{)}}{%
{\ottdrulename{T\_Lam}}{}%
}}


\newcommand{\ottdruleTXXPi}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \tau  \ottsym{:}  \ottnt{s}}%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \tau  \vdash  \tau'  \ottsym{:}  t}%
}{
\Gamma  \vdash  \ottsym{(}  \Pi \, \ottmv{x}  \ottsym{:}  \tau  \ottsym{.}  \tau'  \ottsym{)}  \ottsym{:}  t}{%
{\ottdrulename{T\_Pi}}{}%
}}


\newcommand{\ottdruleTXXFold}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e}  \ottsym{:}  \tau'}%
\ottpremise{\Gamma  \vdash  \tau  \ottsym{:}  \ottnt{s}}%
\ottpremise{\tau  \longrightarrow  \tau'}%
}{
\Gamma  \vdash  \ottsym{(}  \mathsf{fold} \, \ottsym{[}  \tau  \ottsym{]}  \ottnt{e}  \ottsym{)}  \ottsym{:}  \tau}{%
{\ottdrulename{T\_Fold}}{}%
}}


\newcommand{\ottdruleTXXUnfold}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e}  \ottsym{:}  \tau}%
\ottpremise{\Gamma  \vdash  \tau'  \ottsym{:}  \ottnt{s}}%
\ottpremise{\tau  \longrightarrow  \tau'}%
}{
\Gamma  \vdash  \ottsym{(}  \mathsf{unfold} \, \ottnt{e}  \ottsym{)}  \ottsym{:}  \tau'}{%
{\ottdrulename{T\_Unfold}}{}%
}}

\newcommand{\ottdefnexpr}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \ottnt{e}  \ottsym{:}  \tau$}{\ottcom{Expression typing}}
\ottusedrule{\ottdruleTXXAx{}}
\ottusedrule{\ottdruleTXXVar{}}
\ottusedrule{\ottdruleTXXWeak{}}
\ottusedrule{\ottdruleTXXApp{}}
\ottusedrule{\ottdruleTXXLam{}}
\ottusedrule{\ottdruleTXXPi{}}
\ottusedrule{\ottdruleTXXFold{}}
\ottusedrule{\ottdruleTXXUnfold{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsLint}{
\ottdefnexpr{}}

% defns OpSem
%% defn step
\newcommand{\ottdruleSXXBeta}[1]{\ottdrule[#1]{%
}{
\ottsym{(}  \lambda  \ottmv{x}  \ottsym{:}  \tau  \ottsym{.}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{)} \, \ottnt{e_{{\mathrm{2}}}}  \longrightarrow  \ottnt{e_{{\mathrm{1}}}}  \ottsym{[}  \ottmv{x}  \mapsto  \ottnt{e_{{\mathrm{2}}}}  \ottsym{]}}{%
{\ottdrulename{S\_Beta}}{}%
}}


\newcommand{\ottdruleSXXApp}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{e_{{\mathrm{1}}}}  \longrightarrow  \ottnt{e'_{{\mathrm{1}}}}}%
}{
\ottnt{e_{{\mathrm{1}}}} \, \ottnt{e}  \longrightarrow  \ottnt{e'_{{\mathrm{1}}}} \, \ottnt{e}}{%
{\ottdrulename{S\_App}}{}%
}}


\newcommand{\ottdruleSXXUnfold}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{e}  \longrightarrow  \ottnt{e'}}%
}{
\mathsf{unfold} \, \ottnt{e}  \longrightarrow  \mathsf{unfold} \, \ottnt{e'}}{%
{\ottdrulename{S\_Unfold}}{}%
}}


\newcommand{\ottdruleSXXUnfoldXXFold}[1]{\ottdrule[#1]{%
}{
\mathsf{unfold} \, \ottsym{(}  \mathsf{fold} \, \ottsym{[}  \tau  \ottsym{]}  \ottnt{e}  \ottsym{)}  \longrightarrow  \ottnt{e}}{%
{\ottdrulename{S\_Unfold\_Fold}}{}%
}}

\newcommand{\ottdefnstep}[1]{\begin{ottdefnblock}[#1]{$\ottnt{e}  \longrightarrow  \ottnt{e'}$}{\ottcom{Single step semantics}}
\ottusedrule{\ottdruleSXXBeta{}}
\ottusedrule{\ottdruleSXXApp{}}
\ottusedrule{\ottdruleSXXUnfold{}}
\ottusedrule{\ottdruleSXXUnfoldXXFold{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsOpSem}{
\ottdefnstep{}}

\newcommand{\ottdefnss}{
\ottdefnsLint
\ottdefnsOpSem
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
\ottdefnss}


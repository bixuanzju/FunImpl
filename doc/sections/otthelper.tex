%%% !!! WARNING: AUTO GENERATED. DO NOT MODIFY !!! %%%
% Hack to use mathpartir for ott
\newcommand{\ottlinebreak}{}
\renewcommand{\ottdrule}[4][]{{\inferrule{#2 }{#3}\quad\ottdrulename{#4}}}
\renewcommand{\ottgrammartabular}[1]{\begin{tabular}{llcllllll}#1\end{tabular}}
\renewcommand{\ottinterrule}{\\[3.0mm]}
\newcommand{\gram}[1]{\ottgrammartabular{#1\ottafterlastrule}}
\newcommand{\ruleref}[1]{\ottdrulename{#1}}

\newcommand{\castup}{$ \mathsf{cast}^{\uparrow} $\xspace}
\newcommand{\castdown}{$ \mathsf{cast}_{\downarrow} $\xspace}
\newcommand{\cast}{$ \mathsf{cast} $\xspace}

\newcommand{\lam}[3]{ \lambda  #1:#2.\,#3}
\newcommand{\pai}[3]{ \Pi  #1:#2.\,#3}
\newcommand{\miu}[3]{ \mu  #1:#2.\,#3}

\newcommand{\ottcoresugar}{%%
\begin{array}{llll} %
    \text{Syntactic Sugar}\\ %
    \quad T_{{\mathrm{1}}}  \rightarrow  T_{{\mathrm{2}}} & \triangleq & \Pi \, \ottmv{x}  \ottsym{:}  T_{{\mathrm{1}}}  \ottsym{.}  T_{{\mathrm{2}}} \quad x \not \in %
        \FV(T_{{\mathrm{2}}}) \\ %
    \quad \ottsym{(}  \ottmv{x}  \ottsym{:}  T_{{\mathrm{1}}}  \ottsym{)}  \rightarrow  T_{{\mathrm{2}}} & \triangleq & \Pi \, \ottmv{x}  \ottsym{:}  T_{{\mathrm{1}}}  \ottsym{.}  T_{{\mathrm{2}}} \quad x \in \FV(T_{{\mathrm{2}}}) %
        \\ %
    \quad \mathsf{cast}_{\uparrow}^n \, \ottsym{[}  \tau_{{\mathrm{1}}}  \ottsym{]} \,  \ottnt{e} &  \triangleq ~  &  \mathsf{cast}^{\uparrow}  [ \tau_{{\mathrm{1}}} ] ( \mathsf{cast}^{\uparrow}  [ %
        \tau_{{\mathrm{2}}} ] (\dots ( \mathsf{cast}^{\uparrow} \, \ottsym{[}  \tau_{\ottmv{n}}  \ottsym{]} \,  \ottnt{e} ) \dots )) \\ %
    \quad \mathsf{cast}_{\downarrow}^n \, \ottnt{e} &  \triangleq ~  & \underbrace{ \mathsf{cast}_{\downarrow}  ( \mathsf{cast}_{\downarrow}  %
        (\dots (  \mathsf{cast}_{\downarrow} }_n \ottnt{e}) \dots )) %
\end{array} %
}

\newcommand{\ottsurfsugar}{%%
\begin{array}{lllll} %
    &&&& \text{Syntactic Sugar} \\ %
    T_{{\mathrm{1}}}  \rightarrow  T_{{\mathrm{2}}} & \triangleq & \Pi \, \ottmv{x}  \ottsym{:}  T_{{\mathrm{1}}}  \ottsym{.}  T_{{\mathrm{2}}} & x \not \in \FV(T_{{\mathrm{2}}}) & %
        \quad\text{Function type} \\ %
    \ottsym{(}  \ottmv{x}  \ottsym{:}  T_{{\mathrm{1}}}  \ottsym{)}  \rightarrow  T_{{\mathrm{2}}} & \triangleq & \Pi \, \ottmv{x}  \ottsym{:}  T_{{\mathrm{1}}}  \ottsym{.}  T_{{\mathrm{2}}} & x \in \FV(T_{{\mathrm{2}}}) & %
        \quad\text{Dependent function type} \\ %
    \mathsf{cast}_{\uparrow}^n \, \ottsym{[}  T_{{\mathrm{1}}}  \ottsym{]} \,  \ottnt{E} &  \triangleq ~  &  \mathsf{cast}^{\uparrow}  [ T_{{\mathrm{1}}} ] ( \mathsf{cast}^{\uparrow}  [ %
        T_{{\mathrm{2}}} ] (\dots ( \mathsf{cast}^{\uparrow} \, \ottsym{[}  T_{\ottmv{n}}  \ottsym{]} \,  \ottnt{E} ) \dots )) && %
        \quad\text{Cast up in $n$ steps} \\ %
    \mathsf{cast}_{\downarrow}^n \, \ottnt{E} &  \triangleq ~  & \underbrace{ \mathsf{cast}_{\downarrow}  ( \mathsf{cast}_{\downarrow}  %
        (\dots (  \mathsf{cast}_{\downarrow} }_n \ottnt{E}) \dots )) && %
        \quad\text{Cast down in $n$ steps} \\ %
    \kw{data} \, \ottmv{R}  \,\overline{  \ottnt{u}  \ottsym{:}  \kappa  }\,  \ottsym{=}  \ottmv{K}  \ottsym{\{}  \,\overline{  \ottmv{N}  \ottsym{:}  T  }\,  \ottsym{\}} & \triangleq & %
        \kw{data} \, \ottmv{R}  \,\overline{  \ottnt{u}  \ottsym{:}  \kappa  }\,  \ottsym{=}  \ottmv{K}  \,\overline{  T  }\,; && \quad\text{Record} \\ %
        &&  \kw{let} ~\ottmv{N}_i : \ottsym{(}  \,\overline{  \ottnt{u}  \ottsym{:}  \kappa  }\,  \ottsym{)}  \rightarrow  \ottmv{R}    \,\overline{  \ottnt{u}  }\,  \rightarrow  T_i = & %
        \forall i &  \\ %
        && \lambda  \,\overline{  \ottnt{u}  \ottsym{:}  \kappa  }\,  \ottsym{.}  \lambda  \ottmv{y}  \ottsym{:}  \ottmv{R} \, \,\overline{  \ottnt{u}  }\,  \ottsym{.}  \kw{case} \, \ottmv{y} \, \kw{of} \, \ottmv{K}  \,\overline{  \ottmv{x}  \ottsym{:}  T  }\,  \Rightarrow  \ottmv{x}_i~ \kw{in}  && \\ %
\end{array} %
}

\newcommand{\ottdecltrans}{%%
\begin{array}{ll} %
    \ottnt{e}  \triangleq ~  & \kw{let} \, \ottmv{D}  \ottsym{:}  \ottsym{(}  \,\overline{  \ottnt{u}  \ottsym{:}  \sigma  }\,  \ottsym{)}  \rightarrow  \star  \ottsym{=}  \mu \, \ottmv{X}  \ottsym{:}  \ottsym{(}  \,\overline{  \ottnt{u}  \ottsym{:}  \sigma  }\,  \ottsym{)}  \rightarrow  \star  \ottsym{.}  \lambda  \,\overline{  \ottnt{u}  \ottsym{:}  \sigma  }\,  \ottsym{.}  \ottsym{(}  \alpha  \ottsym{:}  \star  \ottsym{)}  \rightarrow  \,\overline{  \ottsym{(}  \,\overline{  \tau  }\,  \ottsym{[}  \ottmv{D}  \mapsto  \ottmv{X}  \ottsym{]} \,  \rightarrow  \alpha  \ottsym{)}  }\,  \rightarrow  \alpha \, \kw{in} \,  \\ %
    & \kw{let} \, \ottmv{K_{\ottmv{i}}}  \ottsym{:}  \ottsym{(}  \,\overline{  \ottnt{u}  \ottsym{:}  \sigma  }\,  \ottsym{)}  \rightarrow  \,\overline{  \tau  }\,  \rightarrow  \ottmv{D}    \,\overline{  \ottnt{u}  }\,  \ottsym{=}  \lambda  \,\overline{  \ottnt{u}  \ottsym{:}  \sigma  }\,  \ottsym{.}  \lambda  \,\overline{  \ottmv{x}  \ottsym{:}  \tau  }\,  \ottsym{.}  \mathsf{cast}_{\uparrow}^n \, \ottsym{[}  \ottmv{D}    \,\overline{  \ottnt{u}  }\,  \ottsym{]} \,  \ottsym{(}  \lambda  \alpha  \ottsym{:}  \star  \ottsym{.}  \lambda  \,\overline{  b  \ottsym{:}  \,\overline{  \tau  }\,  \rightarrow  \alpha  }\,  \ottsym{.}  b_{\ottmv{i}} \, \,\overline{  \ottmv{x}  }\,  \ottsym{)} \, \kw{in} \,  %
\end{array} %
}

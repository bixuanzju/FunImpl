%%% !!! WARNING: AUTO GENERATED. DO NOT MODIFY !!! %%%
% Hack to use mathpartir for ott
\newcommand{\ottlinebreak}{}
\renewcommand{\ottdrule}[4][]{{\inferrule{#2 }{#3}\quad\ottdrulename{#4}}}
\renewcommand{\ottgrammartabular}[1]{\begin{tabular}{llcllllll}#1\end{tabular}}
\renewcommand{\ottinterrule}{\\[3.0mm]}
\newcommand{\gram}[1]{\ottgrammartabular{#1\ottafterlastrule}}
\newcommand{\ruleref}[1]{\ottdrulename{#1}}

\newcommand{\castup}{$ \mathsf{cast}^{\uparrow} $\xspace}
\newcommand{\castdown}{$ \mathsf{cast}_{\downarrow} $\xspace}
\newcommand{\cast}{$ \mathsf{cast} $\xspace}

\newcommand{\lam}[3]{ \lambda  #1:#2.\,#3}
\newcommand{\pai}[3]{ \Pi  #1:#2.\,#3}
\newcommand{\miu}[3]{ \mu  #1:#2.\,#3}

\newcommand*{\mathscale}[2][4]{\scalebox{#1}{$#2$}}%

\def\replace#1#2#3{%
 \def\tmp##1#2{##1#3\tmp}%
   \tmp#1\stopreplace#2\stopreplace}
\def\stopreplace#1\stopreplace{}

\newcommand{\ottcoresugar}{%%
\begin{array}{llll} %
    \text{Syntactic Sugar}\\ %
    \quad T_{{\mathrm{1}}}  \rightarrow  T_{{\mathrm{2}}} & \triangleq & \Pi \, \ottmv{x}  \ottsym{:}  T_{{\mathrm{1}}}  \ottsym{.}  T_{{\mathrm{2}}} \qquad x \not \in %
        \FV(T_{{\mathrm{2}}}) \\ %
    \quad \ottsym{(}  \ottmv{x}  \ottsym{:}  T_{{\mathrm{1}}}  \ottsym{)}  \rightarrow  T_{{\mathrm{2}}} & \triangleq & \Pi \, \ottmv{x}  \ottsym{:}  T_{{\mathrm{1}}}  \ottsym{.}  T_{{\mathrm{2}}} %
        \\ %
    \quad \kw{let} \, \ottmv{x}  \ottsym{:}  \tau  \ottsym{=}  \ottnt{e_{{\mathrm{2}}}} \, \kw{in} \, \ottnt{e_{{\mathrm{1}}}} &  \triangleq ~  & \ottnt{e_{{\mathrm{1}}}}  \ottsym{[}  \ottmv{x}  \mapsto  \ottnt{e_{{\mathrm{2}}}}  \ottsym{]} \, \qquad \Gamma  \vdash  \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \tau \\ %
    \quad \mathsf{cast}_{\uparrow}^n \, \ottsym{[}  \tau_{{\mathrm{1}}}  \ottsym{]} \,  \ottnt{e} &  \triangleq ~  & \mathscale[0.9]{ \mathsf{cast}^{\uparrow}  [ \tau_{{\mathrm{1}}} ] ( \mathsf{cast}^{\uparrow}  [ %
        \tau_{{\mathrm{2}}} ] (\dots ( \mathsf{cast}^{\uparrow} \, \ottsym{[}  \tau_{\ottmv{n}}  \ottsym{]} \,  \ottnt{e} ) \dots ))} \\ %
    \quad \mathsf{cast}_{\downarrow}^n \, \ottnt{e} &  \triangleq ~  & \underbrace{ \mathsf{cast}_{\downarrow}  ( \mathsf{cast}_{\downarrow}  %
        (\dots (  \mathsf{cast}_{\downarrow} }_n \ottnt{e}) \dots ))
\end{array} %
}

\newcommand{\ottsurfsugar}{%%
\begin{array}{lllll} %
    &&&& \text{Syntactic Sugar} \\ %
    T_{{\mathrm{1}}}  \rightarrow  T_{{\mathrm{2}}} & \triangleq & \Pi \, \ottmv{x}  \ottsym{:}  T_{{\mathrm{1}}}  \ottsym{.}  T_{{\mathrm{2}}} & x \not \in \FV(T_{{\mathrm{2}}}) & %
        \quad\text{Function type} \\ %
    \ottsym{(}  \ottmv{x}  \ottsym{:}  T_{{\mathrm{1}}}  \ottsym{)}  \rightarrow  T_{{\mathrm{2}}} & \triangleq & \Pi \, \ottmv{x}  \ottsym{:}  T_{{\mathrm{1}}}  \ottsym{.}  T_{{\mathrm{2}}} &  & %
        \quad\text{Dependent function type} \\ %
    \kw{data} \, \ottmv{R}  \,\overline{  \ottnt{u}  \ottsym{:}  \kappa  }^{n}\,  \ottsym{=}  \ottmv{K}  \ottsym{\{}  \,\overline{  \ottmv{N}  \ottsym{:}  T  }\,  \ottsym{\}} & \triangleq & %
        \kw{data} \, \ottmv{R}  \,\overline{  \ottnt{u}  \ottsym{:}  \kappa  }^{n}\,  \ottsym{=}  \ottmv{K}  \,\overline{  \ottmv{x}  \ottsym{:}  T  }\,; && \quad\text{Record} \\ %
        &&  \kw{let} ~\ottmv{N}_i : \ottsym{(}  \,\overline{  \ottnt{u}  \ottsym{:}  \kappa  }^{n}\,  \ottsym{)}  \rightarrow  \ottmv{R}    \,\overline{  \ottnt{u}  }^{n}\,  \rightarrow  T_i = & %
        i =1,2,\dots,n &  \\ %
        && \lambda  \,\overline{  \ottnt{u}  \ottsym{:}  \kappa  }^{n}\,  \ottsym{.}  \lambda  \ottmv{y}  \ottsym{:}  \ottmv{R}    \,\overline{  \ottnt{u}  }^{n}\,  \ottsym{.}  \kw{case} \, \ottmv{y} \, \kw{of} \, \ottmv{K}  \,\overline{  \ottmv{x}  \ottsym{:}  T  }\,  \Rightarrow  \ottmv{x}_i~ \kw{in}  && \\ %
\end{array} %
}

\newcommand{\ottdeclD}{%%
\mu \, \ottmv{X}  \ottsym{:}  \ottsym{(}  \,\overline{  \ottnt{u}  \ottsym{:}  \rho  }^{n}\,  \ottsym{)}  \rightarrow  \star  \ottsym{.}  \lambda  \,\overline{  \ottnt{u}  \ottsym{:}  \rho  }^{n}\,  \ottsym{.}  \ottsym{(}  b  \ottsym{:}  \star  \ottsym{)}  \rightarrow  \,\overline{  \ottsym{(}  \ottsym{(}  \,\overline{  \ottmv{x}  \ottsym{:}  \tau  \ottsym{[}  \ottmv{D}  \mapsto  \ottmv{X}  \ottsym{]} \,  }\,  \ottsym{)}  \rightarrow  b  \ottsym{)}  }\,  \rightarrow  b %
}

\newcommand{\ottdeclK}{%%
\lambda  \,\overline{  \ottnt{u}  \ottsym{:}  \rho  }^{n}\,  \ottsym{.}  \lambda  \,\overline{  \ottmv{x}  \ottsym{:}  \tau  }\,  \ottsym{.}  \mathsf{cast}_{\uparrow}^{n+1} \, \ottsym{[}  \ottmv{D}    \,\overline{  \ottnt{u}  }^{n}\,  \ottsym{]} \,  \ottsym{(}  \lambda  b  \ottsym{:}  \star  \ottsym{.}  \lambda  \,\overline{  c  \ottsym{:}  \ottsym{(}  \,\overline{  \ottmv{x}  \ottsym{:}  \tau  }\,  \ottsym{)}  \rightarrow  b  }\,  \ottsym{.}  c_{\ottmv{i}} \, \,\overline{  \ottmv{x}  }\,  \ottsym{)} %
}

\newcommand{\ottdecltrans}{%%
\begin{array}{ll} %
    \ottnt{e}  \triangleq ~  &  \kw{let} ~\ottmv{D} : \ottsym{(}  \,\overline{  \ottnt{u}  \ottsym{:}  \rho  }^{n}\,  \ottsym{)}  \rightarrow  \star = \ottdeclD~ \kw{in}  \\ %
    &  \kw{let} ~\ottmv{K_{\ottmv{i}}} : \ottsym{(}  \,\overline{  \ottnt{u}  \ottsym{:}  \rho  }^{n}\,  \ottsym{)}  \rightarrow  \ottsym{(}  \,\overline{  \ottmv{x}  \ottsym{:}  \tau  }\,  \ottsym{)}  \rightarrow  \ottmv{D}    \,\overline{  \ottnt{u}  }^{n}\, = \ottdeclK~ \kw{in}  %
\end{array} %
}
